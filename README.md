![Bingo](https://github.com/ruckii/yyapp/assets/1169824/5d9961d5-a9f1-41ae-8630-14673ecf3488)

# Bingo ÑÐµÑ€Ð²Ð¸Ñ "ÐšÑ€Ð¾Ð²ÑŒ Ð¸ ÑÐ»Ñ‘Ð·Ñ‹"
*Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚ÑŒ Young&&Yandex ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ Ð·Ð° Ð±ÐµÑÑ†ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ð¿Ñ‹Ñ‚!*

# Ð˜ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ

## Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ [~4 Ñ‡Ð°Ña]

```bash
wget https://storage.yandexcloud.net/final-homework/bingo
file bingo # --> bingo: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, with debug_info, not stripped
chmod +x bingo
./bingo # --> Hello world
./bingo --help
./bingo version
./bingo print_current_config
./bingo print_default_config
./bingo print_default_config > bingo.conf
./bingo --help
./bingo run_server --help
./bingo run_server # --> Crashed
sudo ./bingo run_server # --> Didn't your mom teach you not to run anything incomprehensible from root?
strace bingo
strace ./bingo
strace ./bingo get_current_config
strace ./bingo print_current_config # --> found failed access to file /opt/bingo/config.yaml
sudo mkdir /opt/bingo
./bingo print_default_config > config.yaml
sudo cp config.yaml /opt/bingo/
./bingo print_current_config
strace ./bingo run_server
#--âœ‚--edit config.yaml--âœ‚--
#--âœ‚--run postgres in docker--âœ‚--
./bingo prepare_db # --> ~20min
#--âœ‚--install DBeaver (https://dbeaver.io/)--âœ‚--
#--âœ‚--inspect bingo DB structure--âœ‚--
./bingo run_server # --> Still crashed
strace ./bingo run_server # --> found failed access to file /opt/bongo/logs/21b3c4259a/main.log
sudo mkdir -p /opt/bongo/logs/21b3c4259a/
sudo touch /opt/bongo/logs/21b3c4259a/main.log
./bingo run_server
strace ./bingo run_server # --> found insufficient rights on file
sudo chmod 0666 /opt/bongo/logs/21b3c4259a/main.log
./bingo run_server # --> 30sec startup
./bingo run_server &
tail -f /opt/bongo/logs/21b3c4259a/main.log
```


## ÐŸÐ¾Ñ…Ð¾Ð´ Ð² ÐºÐ¾Ñ€ÐµÐ½ÑŒ
Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¿Ð¾Ñ€Ñ‚Ñ‹

```bash
ss -tunlp # --> ipv6 4922/tcp
```

http://localhost:4922 # --> Ð½Ðµ Ð¿Ð¾Ð¼Ð½ÑŽ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹

ÐÐ°ÑˆÑ‘Ð» ÐºÐ¾Ð´:
```
My congratulations.
You were able to start the server.
Here's a secret code that confirms that you did it.
--------------------------------------------------
code:         yoohoo_server_launched
--------------------------------------------------
```

## Web-proxy [1 Ð´ÐµÐ½ÑŒ]
Ð’Ñ‹Ð±Ð¸Ñ€Ð°ÑŽ Ð¿Ñ€Ð¾ÐºÑÐ¸, Ñ€Ð°Ð½ÐµÐµ Ñ nginx ÑƒÐ¶Ðµ ÑÑ‚Ð°Ð»ÐºÐ¸Ð²Ð°Ð»ÑÑ, Ñ€ÐµÑˆÐ¸Ð» Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð² ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñƒ Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ….
ÐœÐµÐ¶Ð´Ñƒ traefic Ð¸ caddy Ð²Ñ‹Ð±Ñ€Ð°Ð» Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ð» Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹.
Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð» Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð· Ñ dockerhub, Ð¿Ð¾Ñ‚Ð¾Ð¼ ÑÐ¾Ð±Ñ€Ð°Ð» ÑÐ²Ð¾Ð¹ (Ð² Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ð¼ ÑÑ‚Ð¾Ð»ÐºÐ½ÑƒÐ»ÑÑ Ñ ÐºÐ°ÐºÐ¾Ð¹-Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð¾Ð¹, Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ Ð½Ðµ Ð¿Ð¾Ð¼Ð½ÑŽ, Ð²Ñ€Ð¾Ð´Ðµ Ð±Ñ‹ Ð·Ð°Ñ…Ð¾Ñ‚ÐµÐ» Caddyfile Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ²Ð¾Ð¹, Ð° Ð½Ðµ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· volume).

Ð˜Ð· Ð¿Ð»ÑŽÑÐ¾Ð² caddy:
- Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð¾Ð½ÑÑ‚Ð½Ð°Ñ Ð¸ Ð¿Ð¾Ð»Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
- http/3 Ð¸ ÑÐ°Ð¼Ð¾Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ð¹ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ TLS
- ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¼ÐµÑ‚Ñ€Ð¸Ðº Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ prometheus
- Ð¼Ð½Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ð½Ñ‹Ñ… ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð² Ð±Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸
- Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° healthcheck Ð´Ð»Ñ upstream-ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²

ÐœÐ¸Ð½ÑƒÑÑ‹:
 - Ð½ÐµÑ‚ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸Ð· ÐºÐ¾Ñ€Ð¾Ð±ÐºÐ¸, Ð½ÑƒÐ¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÑÐ¾Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ Ñ Ð¼Ð¾Ð´ÑƒÐ»ÑÐ¼Ð¸ (Ð¿Ñ€Ð¸ÑˆÐ»Ð¾ÑÑŒ ðŸš²ðŸ¦¯, ÑÐ¼. ÐºÐ¾Ð´ Caddyfile, Makefile Ð¸ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¾Ð²)

## ÐŸÐ»Ð°Ð½Ð¸Ñ€ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¸ Ð¾Ñ‚ÐºÐ°Ð·Ð¾ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ÑÑ‚ÑŒ

Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð²ÑÑ‘ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ñ… Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¾.

### ÐžÐ±Ñ€Ð°Ð·Ñ‹

ÐŸÐ¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð° Ð¿Ñ€Ð¾Ð± Ð¸ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ñ‹ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹:

- Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… - Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð· [bitnami/postgresql](https://hub.docker.com/r/bitnami/postgresql) Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹ Ñ€ÐµÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸
- ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽ init Ð¾Ð±Ñ€Ð°Ð· Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° **bingo prepare_db** Ð½Ð° Ð±Ð°Ð·Ðµ gcr.io/distroless/static-debian12:nonroot
- ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽ Ð¾Ð±Ñ€Ð°Ð· Ð´Ð»Ñ **bingo run_server** Ð½Ð° Ð±Ð°Ð·Ðµ ubuntu
- Ð²ÐµÐ±-Ð¿Ñ€Ð¾ÐºÑÐ¸ - ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð· [caddy](https://hub.docker.com/_/caddy), Ð¿Ð¾Ñ‚Ð¾Ð¼ ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽ ÑÐ²Ð¾Ð¹

### Ð¢ÐµÑÑ‚Ñ‹

Ð¡Ñ‚Ð°Ð²Ð»ÑŽ Ð¸ Ð¿Ñ€Ð¾Ð±ÑƒÑŽ wrk. Ð Ð°Ð½ÐµÐµ, ÐºÐ°Ð¶ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ðµ strace Ð¸ ld Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð¾Ñ‚ bingo Ð·Ð°Ð¼ÐµÑ‚Ð¸Ð» Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ Ñ‚Ñ€Ð¾Ñ‚Ñ‚Ð»Ð¸Ð½Ð³Ð° Ð´Ð»Ñ golang. ÐÐ° Ñ‚ÐµÑÑ‚Ð°Ñ… Ð·Ð°Ð¼ÐµÑ‡Ð°ÑŽ, Ñ‡Ñ‚Ð¾ RPS Ð¾Ñ‚ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ° bingo Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½ ~100. ÐÑƒÐ¶Ð½Ð¾ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 2 ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð¢Ð—.

Ð—Ð°Ð¼ÐµÑ‡Ð°ÑŽ, Ñ‡Ñ‚Ð¾ bingo:
- Ð¿Ð°Ð´Ð°ÐµÑ‚ Ð¿Ð¾ OOM
- I feel bad Ð²Ð¼ÐµÑÑ‚Ð¾ pong Ð½Ð° healthcheck

Ð”Ð¾Ð±Ð°Ð²Ð»ÑÑŽ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð² docker-Ð¾Ð±Ñ€Ð°Ð· (ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð±Ñ‹Ð» Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚ ~35 ÑÐµÐºÑƒÐ½Ð´, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÐ¿ÐµÐ»Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒÑÑ Ð¸ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð´Ð°Ð²Ð°Ñ‚ÑŒ **pong**, ÐºÐ¾Ð³Ð´Ð° Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ð»ÑÑ Ñ ÑƒÑÐºÐ¾Ñ€ÐµÐ½Ð¸ÐµÐ¼ Ð·Ð°Ð¿ÑƒÑÐºÐ° - ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ¸Ð» Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ñ‹):

**bingo-server.Dockerfile**

```dockerfile
HEALTHCHECK --interval=5s --timeout=2s \
    CMD ./healthcheck.sh || kill 1 
```

**healthcheck.sh**
```bash
#!/bin/bash
STATUS=$(curl --silent http://localhost:4922/ping)
if [[ $STATUS == "pong" ]]; then
  echo "OK"
  exit 0
else
  echo "KO"
  exit 1
fi
```

ÐŸÑ€Ð¸ÐºÑ€ÑƒÑ‡Ð¸Ð²Ð°ÑŽ Ð±Ð¾Ð¼Ð¶-Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸, Ð¿Ð¾ÑÐ»Ðµ Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· caddy:

```bash
#!/bin/bash

while true;
  do
  STATUS=$(curl --silent -k https://node-01.local/ping) # [OK] pong / [KO] I feel bad
  curl --fail --silent -k https://node-01.local/ping > /dev/null
  if [[ $? == 7 ]]; then
    echo -n "X"
  elif [[ $STATUS == "I feel bad" ]]; then
    echo -n "B"
  else
    echo -n "."
  fi
sleep 1;
done
```

Ð˜Ð·ÑƒÑ‡Ð°ÑŽ ÐºÐ°Ñ€Ñ‚Ð¸Ð½Ñƒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ Ð² Ñ‚Ð°ÐºÐ¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ:

```
...........................................................BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB.............
................................................................................................BBBBBBBBBBBBBBB
BBBBBBBBBBBBBB.................................................................................................
...............................................................................................................
.......................................................................XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..
...............................................................................................................
...............BB..............................................................................................
```


### ÐžÑ€ÐºÐµÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ

Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð´ÐµÐ»Ð°Ð» Ð²ÑÑ‘ Ð½Ð° ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ Ð’Ðœ (Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð¿Ð¾Ð´Ð½ÑÑ‚Ð°Ñ Ð½Ð° ÑÐ²ÑÐ·ÐºÐµ [Ubuntu Multipass + Windows 10 Hyper-V](https://multipass.run/docs/installing-on-windows#heading--hyper-v) - *ÐºÑ€Ð°Ð¹Ð½Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑŽ, Ð¿Ñ€Ð¸ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸ ÑÑ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ WSL - Ð»ÑƒÑ‡ÑˆÐ°Ñ Ð¸Ð·Ð¾Ð»ÑÑ†Ð¸Ñ, ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¸ docker*)

ÐŸÐ¸ÑˆÑƒ compose.yaml:

- Ð´Ð»Ñ Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð´ÐµÐ»Ð°ÑŽ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð´Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ñ€Ñ‚Ð° Ð¸ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð°
- Ð´ÐµÐ»Ð°ÑŽ healthcheck-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð½Ðµ Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°Ð»Ð¸ÑÑŒ Ñ€Ð°Ð½ÑŒÑˆÐµ, Ñ‡ÐµÐ¼ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ñ‚Ðµ, Ð¾Ñ‚ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð·Ð°Ð²Ð¸ÑÑÑ‚ (postgresql --> bingo-prepare-bd --> bingo-server --> caddy)
- Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑŽ persistent-Ñ‚Ð¾Ð¼ Ð´Ð»Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
- Ð¿Ñ€Ð¾Ð±ÑƒÑŽ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð¾Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² Ñ bingo-server Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°Ñ‚ÑŒ Ð±Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²ÐºÑƒ

Ð¥Ð¾Ñ‚ÐµÐ» Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Docker swarm-mode, Ð½Ð¾ Ð¾Ñ‚ÐºÐ°Ð·Ð°Ð»ÑÑ Ð¸Ð·-Ð·Ð° Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ 3 Ð½Ð¾Ð´Ñ‹ Ð´Ð»Ñ ÐºÐ²Ð¾Ñ€ÑƒÐ¼Ð°. ÐÐ° 2 Ð½Ð¾Ð´Ð°Ñ… Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ, Ð¸ Ð´Ð°Ð¶Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ, Ð½Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð²Ñ‹Ñ…Ð¾Ð´Ðµ Ð¸Ð· ÑÑ‚Ñ€Ð¾Ñ worker-Ð½Ð¾Ð´Ñ‹. Ð•ÑÐ»Ð¸ Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð½Ð¾Ð´Ñƒ, Ð½Ð° ÐºÐ¾Ð¾Ñ€Ð¾Ð¹ controller - Ð²ÑÑ‘ Ð¿Ð°Ð´Ð°ÐµÑ‚. ÐÐµÐ¿Ñ€Ð¸ÐµÐ¼Ð»ÐµÐ¼Ð¾.

ÐšÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÑŽ Ð¿Ñ€Ð¸ÐµÐ¼Ð»ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ docker compose, Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÑŽ Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð² Yandex Cloud.

_ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼ Ð¿Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼ Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð² Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ð½Ð° 1 Ð’Ðœ (2 GB RAM, 2 vCPU)._

### Ð¦ÐµÐ»ÐµÐ²Ð°Ñ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°

_Ð¡Ð¼. ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÑƒ Ð²Ñ‹ÑˆÐµ._

Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð’Ðœ, ÑÐµÑ‚Ð¸, Ð¿Ð¾Ð´ÑÐµÑ‚Ð¸ c Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Terraform.

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ (CI/CD)

Ð’Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¸ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð² Ð±Ñ‹Ð»Ð¾ Ð¼Ð°Ð»Ð¾, GitHub Actions Ð¿Ð¾Ñ‚Ñ‹ÐºÐ°Ð» Ð¿Ð°Ð»Ð¾Ñ‡ÐºÐ¾Ð¹ Ð¸ Ñ€ÐµÑˆÐ¸Ð» Ð¿Ð¾ ÑÑ‚Ð°Ñ€Ð¸Ð½ÐºÐµ Ñ‡ÐµÑ€ÐµÐ· Makefile.
ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹ Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð» Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ master/slave ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ð¿Ð¾Ð´ Ubuntu 22.04.

```bash

# 1. ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐµÐ¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹

git clone https://github.com/ruckii/yyapp

# 2. Ð¡Ñ‚Ð°Ð²Ð¸Ð¼ make

sudo apt update
sudo apt install make

# 3. Ð”ÐµÐ»Ð°ÐµÐ¼ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð²ÐµÑ‰Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ make

cd yyapp
make
'--> Bingo service <<The Hard Way>> <--'

# 4. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ ÑÑ‚Ð°Ð²Ð¸Ð¼ master Ð½Ð¾Ð´Ñƒ
make master
#--âœ‚--Ð¸Ð´Ñ‘Ñ‚ Ñ€Ð°ÑÐºÐ°Ñ‚ÐºÐ° Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸Ð½Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð³Ð¾Ð¹--âœ‚--

# 5. Ð˜Ð»Ð¸ slave Ð½Ð¾Ð´Ñƒ
make slave
#--âœ‚--Ð¸Ð´Ñ‘Ñ‚ Ñ€Ð°ÑÐºÐ°Ñ‚ÐºÐ° Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸Ð½Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð³Ð¾Ð¹--âœ‚--

# 6. ÐšÐ¾Ð³Ð´Ð° ÑƒÑÑ‚Ð°Ð»Ð¸

make clean
#--âœ‚--Ð¸Ð´Ñ‘Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð²ÑÑÐºÐ¾Ð³Ð¾ Ð¸ Ð¸Ð´Ñ‘Ð¼ ÑÐ½Ð¾Ð²Ð° Ð½Ð° Ð¿ÑƒÐ½ÐºÑ‚ 4. Ð¸Ð»Ð¸ 5.--âœ‚--
```
Ð¤Ð¸Ñ‡Ð¸ (Ñ‚Ð°Ñ€Ð³ÐµÑ‚Ñ‹):
- info - Ð½Ðµ Ð´Ð¾Ð´ÐµÐ»Ð°Ð½Ð¾
- update/upgrade - Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐµÑˆÐ° Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ², Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐžÐ¡
- hostname-master/hostname-slave - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸Ð¼ÐµÐ½Ð¸ Ñ…Ð¾ÑÑ‚Ð°
- dns-resolver - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° avahi (zeroconf local DNS Ñ€ÐµÐ·Ð¾Ð»ÑŒÐ²ÐµÑ€)
- ban-google - ÑƒÑÐºÐ¾Ñ€ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° bingo service
- cache-long-dummy - ÐºÐ¾ÑÑ‚Ñ‹Ð»ÑŒÐ½Ð¾-Ð²ÐµÐ»Ð¾ÑÐ¸Ð¿ÐµÐ´Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
- test - Ð·Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð² wrk
- docker - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐºÐ° docker
- timesync - Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¿Ð¾ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÑÐ¼ Ð¸Ð· ÑÑ‚Ð°Ñ‚ÑŒÐ¸ Yandex Cloud
- downloads - ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ bingo Ð¸ caddy
- tools - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° wrk, yq
- build - ÑÐ±Ð¾Ñ€ÐºÐ° Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²
- configure-master/configure-slave - Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð½Ð¾Ð´
- master/slave - Ð·Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð½Ð° Ð½Ð¾Ð´Ð°Ñ…
- passwords-master/passwords-slave - Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¸ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¹ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð°Ñ… postgres Ð¸ bingo, Ð¿Ñ€Ð¸ ÑÑ‚Ð¾Ð¼ Ð½Ð° slave-Ð½Ð¾Ð´Ðµ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÑŽÑ‚ÑÑ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð² Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÐºÐ»Ð°ÑÑ‚ÐµÑ€ ÑÐ¾Ð±Ñ€Ð°Ð»ÑÑ
- clean - Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° Ð¾Ñ‚ Ð²ÑÑÐºÐ¸Ñ… Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð² (Ð½Ðµ Ð²ÑÐµÑ…), Ð·Ð°Ð¼ÐµÐ½Ð° Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¹ Ð·Ð°Ð³Ð»ÑƒÑˆÐºÐ°Ð¼Ð¸

# Ð Ð°Ð·Ð½Ñ‹Ðµ Ð²ÐµÑ‰Ð¸

## Ð£ÑÐºÐ¾Ñ€ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‚Ð°

Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ñ Ð´ÑƒÐ¼Ð°Ð», Ñ‡Ñ‚Ð¾ Ð´Ð¾Ð»Ð³Ð¸Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ ÑÑ‚Ð¾ Ð½Ð¾Ñ€Ð¼Ð°. ÐŸÐ¾Ñ‚Ð¾Ð¼ Ð½Ð°ÑˆÑ‘Ð» ÐºÐ¾Ð´, Ð¿Ñ€Ð¾ÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ bingo Ð² Ð±Ð»Ð¾ÐºÐ½Ð¾Ñ‚Ðµ. Ð”Ð°Ð»ÐµÐµ Ð½Ð°ÑˆÑ‘Ð» http://8.8.8.8 Ð² ÑÑ‚Ñ€Ð¾ÐºÐ°Ñ… Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¸ÐºÐ°, Ð¾Ñ‚ÐºÑ€Ñ‹Ð» Ð¸ ÑƒÐ²Ð¸Ð´ÐµÐ» Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚. 

Ð”Ð°Ð»ÐµÐµ:

```bash
ip route add blackhole 8.8.8.8
```

## Avahi - zeroconf Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð¸Ð¼Ñ‘Ð½ (*.local)

sudo apt install avahi-daemon
sudo systemctl start avahi-daemon
sudo systemctl status avahi-daemon
sudo systemctl enable avahi-daemon

## ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð‘Ð”

Ð—Ð°Ð¿ÑƒÑÐºÐ°ÑŽ DBeaver Ð¸ Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ Ð¿Ñ€Ð¾Ð³Ð¾Ð½ÐºÐ¸ Ñ‚ÐµÑÑ‚Ð¾Ð² ÑÐ¼Ð¾Ñ‚Ñ€ÑŽ ÑÐµÑÑÐ¸Ð¸ Ð¸ ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹. Ð—Ð°Ð¿ÑƒÑÐºÐ°ÑŽ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ñ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹.

```sql
explain (analyze,verbose on)
```
Ð¡Ð¼Ð¾Ñ‚Ñ€ÑŽ Ð¿Ð»Ð°Ð½Ñ‹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð², Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑŽ Ð¸Ð½Ð´ÐµÐºÑÑ‹ Ð¸/Ð¸Ð»Ð¸ Ð¿ÐµÑ€Ð²Ð¸Ñ‡Ð½Ñ‹Ðµ ÐºÐ»ÑŽÑ‡Ð¸.

Ð¡Ð°Ð¼Ð°Ñ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð±Ñ‹Ð»Ð° Ñ _GET /sessions_ - Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¿Ð¾ ÑˆÐ°Ð³Ð°Ð¼, Ð¿Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ JOIN Ð¸ ORDER, Ð¿Ð¾Ð¿ÑƒÑ‚Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ Ð¸Ð½Ð´ÐµÐºÑÑ‹.

#### ÐŸÐ¾Ð²Ð¾Ñ€Ð¾Ñ‚ Ð½Ðµ Ñ‚ÑƒÐ´Ð°

ÐŸÐ¾Ð¿ÑƒÑ‚Ð½Ð¾ Ð¿Ð¾ÑˆÑ‘Ð» Ð¿Ð¾ ÐºÑ€Ð¸Ð²Ð¾Ð¹ Ð´Ð¾Ñ€Ð¾Ð¶ÐºÐµ, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ð² Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ **sessions** Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ, Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼Ð¸ Ð¾Ð½Ð° ÑÐ¾ÐµÐ´Ð¸Ð½ÑÐµÑ‚ÑÑ Ð² columnar _table_. 
Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð‘Ð” Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð» Ð½Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ðµ [citusdata/citus](https://hub.docker.com/r/citusdata/citus). Ð¢Ð°ÐºÐ¶Ðµ, Ð¼Ð½Ð¾Ð³Ð¾ Ð´ÑƒÐ¼Ð°Ð» Ð½Ð° Ñ‚ÐµÐ¼Ñƒ ÑˆÐ°Ñ€Ð´Ð¸Ð½Ð³Ð° Ñ‚Ð°Ð±Ð»Ð¸Ñ† Ð¿Ð¾ Ð´Ð²ÑƒÐ¼ Ð½Ð¾Ð´Ð°Ð¼.

```sql
-- ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ Ñ†ÐµÐ»ÐµÐ²ÑƒÑŽ columnar Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ
CREATE TABLE public.customers_col (
	id int4 NOT NULL DEFAULT nextval('customers_id_seq'::regclass),
	"name" varchar(80) NOT NULL,
	surname varchar(80) NOT NULL,
	birthday date NOT NULL,
	email varchar(256) NOT NULL,
	CONSTRAINT customers_pk PRIMARY KEY (id)
) USING columnar;

-- ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð¹
INSERT INTO customers_col
SELECT * FROM customers;

-- Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ñ‹Ð²Ð°ÐµÐ¼, Ð¸ÑÑ…Ð¾Ð´Ð½ÑƒÑŽ Ð¸ Ñ†ÐµÐ»ÐµÐ²ÑƒÑŽ, Ð¼ÐµÐ½ÑÑ Ð¸Ñ… Ð¼ÐµÑÑ‚Ð°Ð¼Ð¸
...
```

Columnar Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð¿Ð¾ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸ Ð½Ðµ ÑÐ¸Ð»ÑŒÐ½Ð¾ Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹Ð²Ð°Ð»Ð¸ Ð½Ð° Ñ‚ÐµÐºÑƒÑ‰Ð¸Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ñ… Ñƒ row-based, Ñ‡Ñ‚Ð¾, Ð² Ð¿Ñ€Ð¾Ñ‡ÐµÐ¼ Ð±Ñ‹Ð»Ð¾ Ð¾Ð¶Ð¸Ð´Ð°ÐµÐ¼Ð¾, Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹Ð»Ð° Ð½Ð°Ð´ÐµÐ¶Ð´Ð° Ñ‡Ñ‚Ð¾ Ð·Ð° ÑÑ‡Ñ‘Ñ‚ ÑƒÐ¼ÐµÐ½ÑŒÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð° Ð‘Ð” Ð¾Ð½Ð° Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸.

#### Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚

Ð’ Ð¸Ñ‚Ð¾Ð³Ðµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¸ÑÑ…Ð¾Ð´Ð½ÑƒÑŽ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð½Ðµ Ð¾Ñ‚Ð²Ð°Ð»Ð¸Ð²Ð°Ð»Ð¸ÑÑŒ Ð¿Ð¾ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ñƒ.

Ð’ÑÐµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸:
```sql
-- PK
ALTER TABLE public.sessions ADD CONSTRAINT sessions_pk PRIMARY KEY (id);
ALTER TABLE public.customers ADD CONSTRAINT customers_pk PRIMARY KEY (id);
ALTER TABLE public.movies ADD CONSTRAINT movies_pk PRIMARY KEY (id);
-- Indexes
CREATE INDEX sessions_movie_id_idx ON public.sessions USING btree (movie_id);
CREATE INDEX movies_year_name_idx ON public.movies USING btree (year DESC, name);
CREATE INDEX customers_surname_idx ON public.customers (surname,"name",birthday DESC,id DESC);
CREATE INDEX movies_year_idx ON public.movies ("year" DESC,"name",id DESC);
```

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

- Yandex Monitoring Ð´Ð»Ñ VM (Ð´Ð¸ÑÐºÐ¸, CPU), NLB (Ð¿Ð°ÐºÐµÑ‚Ñ‹)
- Grafana+Prometheus Ð´Ð»Ñ caddy (Ð½Ð° Ð´Ð¾Ð¼Ð°ÑˆÐ½ÐµÐ¼ ÐŸÐš), Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ»ÐµÐ´Ð¸Ñ‚ÑŒ Ð·Ð° RPS, Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒÑŽ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ð¼Ð¸ HTTP


# English version
## Deployment steps

1. Clone repository

  git clone https://github.com/ruckii/yyapp

2. Install **make** utility

  sudo apt update
  sudo apt install make

3. Do other stuff using **make**

  cd yyapp
  make
